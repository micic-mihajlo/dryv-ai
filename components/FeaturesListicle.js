"use client";
  
import { useState, useEffect, useRef } from "react";

// List of features to display:
// - name: name of the feature
// - description: description of the feature (can be any JSX)
// - svg: icon of the feature
const features = [
  {
    name: "Smart Scheduling",
    description: (
      <>
        <p className="mb-2">
          Dryv intelligently schedules your tasks and appointments,
          optimizing your calendar for maximum efficiency.
        </p>
        <ul className="space-y-1 list-disc list-inside">
          <li>
            Analyzes your availability, deadlines, and priorities to find the
            best time slots.
          </li>
          <li>
            Automatically schedules recurring tasks and appointments.
          </li>
          <li>
            Suggests optimal meeting times based on participant availability.
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
        />
      </svg>
    ),
  },
  {
    name: "Task Prioritization",
    description: (
      <>
        <p className="mb-2">
          Dryv helps you prioritize your tasks based on their importance and
          urgency, ensuring you focus on what matters most.
        </p>
        <ul className="space-y-1 list-disc list-inside">
          <li>
            Uses the Eisenhower Matrix to categorize tasks by urgency and
            importance.
          </li>
          <li>
            Allows you to set deadlines and reminders to stay on track.
          </li>
          <li>
            Provides a clear overview of your prioritized task list.
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
        />
      </svg>
    ),
  },
  {
    name: "Time Tracking",
    description: (
      <>
        <p className="mb-2">
          Dryv tracks your time spent on tasks, providing insights into your
          work patterns and helping you identify areas for improvement.
        </p>
        <ul className="space-y-1 list-disc list-inside">
          <li>
            Automatically starts and stops tracking when you switch tasks.
          </li>
          <li>
            Generates detailed reports on your time usage.
          </li>
          <li>
            Helps you understand where your time is going and how to optimize
            it.
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
    ),
  },
 /*  {
    name: "Focus Mode",
    description: (
      <>
        <p className="mb-2">
          Dryv`s Focus Mode helps you eliminate distractions and stay on task,
          boosting your concentration and productivity.
        </p>
        <ul className="space-y-1 list-disc list-inside">
          <li>
            Blocks distracting websites and notifications during focus
            sessions.
          </li>
          <li>
            Plays calming ambient sounds to enhance focus.
          </li>
          <li>
            Tracks your progress and provides motivational feedback.
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M13.5 10.5V6.75a4.5 4.5 0 119 0v3.75M3.75 21.75h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H3.75m10.5 0v6.75C10.5 18 8.25 15.75 6 15.75S1.5 18 1.5 21.75v6.75m9-4.5h5.25a2.25 2.25 0 012.25 2.25v3.75a2.25 2.25 0 01-2.25 2.25H9.75A2.25 2.25 0 017.5 21.75v-3.75a2.25 2.25 0 012.25-2.25H15m0 0h3.75"
        />
      </svg>
    ),
  }, */
  {
    name: "Personalized Insights",
    description: (
      <>
        <p className="mb-2">
          Dryv provides personalized insights and recommendations to help you
          continuously improve your time management skills.
        </p>
        <ul className="space-y-1 list-disc list-inside">
          <li>
            Identifies time-wasting activities and suggests alternatives.
          </li>
          <li>
            Tracks your progress towards your goals and provides
            accountability.
          </li>
          <li>
            Helps you develop better habits and routines for optimal
            productivity.
          </li>
        </ul>
      </>
    ),
    svg: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth={1.5}
        stroke="currentColor"
        className="w-8 h-8"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"
        />
      </svg>
    ),
  },
];

// A list of features with a listicle style.
// - Click on a feature to display its description.
// - Good to use when multiples features are available.
// - Autoscroll the list of features (optional).
const FeaturesListicle = () => {
  const featuresEndRef = useRef(null);
  const [featureSelected, setFeatureSelected] = useState(features[0].name);
  const [hasClicked, setHasClicked] = useState(false);

  // (Optional) Autoscroll the list of features so user know it's interactive.
  // Stop scrolling when user scroll after the featuresEndRef element (end of section)
  // emove useEffect is not needed.
  useEffect(() => {
    const interval = setInterval(() => {
      if (!hasClicked) {
        const index = features.findIndex(
          (feature) => feature.name === featureSelected
        );
        const nextIndex = (index + 1) % features.length;
        setFeatureSelected(features[nextIndex].name);
      }
    }, 5000);

    try {
      // stop the interval when the user scroll after the featuresRef element
      const observer = new IntersectionObserver(
        ([entry]) => {
          if (entry.isIntersecting) {
            console.log("STOP AUTO CHANGE");
            clearInterval(interval);
          }
        },
        {
          root: null,
          rootMargin: "0px",
          threshold: 0.5,
        }
      );
      if (featuresEndRef.current) {
        observer.observe(featuresEndRef.current);
      }
    } catch (e) {
      console.error(e);
    }

    return () => clearInterval(interval);
  }, [featureSelected, hasClicked]);

  return (
    <section className="py-24" id="features">
      <div className="max-w-3xl mx-auto">
        <div className="bg-base-100 max-md:px-8 max-w-3xl">
          <h2 className="font-extrabold text-3xl lg:text-5xl tracking-tight mb-8">
            {/* ðŸ’¡ COPY TIP: Remind visitors about the value of your product. Why do they need it? */}
            Unlock Your Productivity Potential with Dryv
          </h2>
          <div className="text-base-content/80 leading-relaxed mb-8 lg:text-lg">
            {/* ðŸ’¡ COPY TIP: Explain how your product delivers what you promise in the headline. */}
            Dryv is your personal AI time management assistant, designed to
            help you take control of your schedule and achieve peak
            productivity.
          </div>
        </div>
      </div>

      <div>
        <div className="grid grid-cols-4 md:flex justify-start gap-4 md:gap-12 max-md:px-8 max-w-3xl mx-auto mb-8">
          {features.map((feature) => (
            <span
              key={feature.name}
              onClick={() => {
                if (!hasClicked) setHasClicked(true);
                setFeatureSelected(feature.name);
              }}
              className={`flex flex-col items-center justify-center gap-3 select-none cursor-pointer p-2 duration-200 group`}
            >
              <span
                className={`duration-100 ${
                  featureSelected === feature.name
                    ? "text-primary"
                    : "text-base-content/30 group-hover:text-base-content/50"
                }`}
              >
                {feature.svg}
              </span>
              <span
                className={`font-semibold text-sm ${
                  featureSelected === feature.name
                    ? "text-primary"
                    : "text-base-content/50"
                }`}
              >
                {feature.name}
              </span>
            </span>
          ))}
        </div>
        <div className="bg-base-200">
          <div className="max-w-3xl mx-auto flex flex-col md:flex-row justify-center md:justify-start md:items-center gap-12">
            <div
              className="text-base-content/80 leading-relaxed space-y-4 px-12 md:px-0 py-12 max-w-xl animate-opacity"
              key={featureSelected}
            >
              <h3 className="font-semibold text-base-content text-lg">
                {features.find((f) => f.name === featureSelected)["name"]}
              </h3>

              {features.find((f) => f.name === featureSelected)["description"]}
            </div>
          </div>
        </div>
      </div>
      {/* Just used to know it's the end of the autoscroll feature (optional, see useEffect) */}
      <p className="opacity-0" ref={featuresEndRef}></p>
    </section>
  );
};

export default FeaturesListicle;